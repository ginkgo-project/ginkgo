add_executable(spmv spmv.cpp)
target_link_libraries(spmv ginkgo gflags rapidjson)
if (GINKGO_BUILD_CUDA)
    target_compile_definitions(spmv PRIVATE HAS_CUDA=1)
    if (NOT MSVC)
        target_link_libraries(spmv ginkgo ${CUDA_RUNTIME_LIBS}
            ${CUBLAS} ${CUSPARSE})
        target_include_directories(spmv SYSTEM PRIVATE ${CUDA_INCLUDE_DIRS})
    endif()
    if(CMAKE_CUDA_COMPILER_VERSION GREATER_EQUAL "9.2")
        target_compile_definitions(spmv PRIVATE ALLOWMP=1)
    endif()
endif()