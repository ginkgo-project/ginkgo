spack:
  specs:
    # ginkgo
    - cmake
    - ninja
    - googletest +gmock cxxstd=14
    - rapidjson
    - gflags
    # ginkgo examples and features
    - papi +sde
    - perfstubs
    - tau
    - kokkos
    - "hwloc @2.0:"
    - benchmark
    - opencv +videoio
    - python
    # ginkgo_mpi
    - "openmpi @4.1: +cuda"
    # development environment
    - valgrind
    - gdb +source-highlight +tui +python
    - git
    - ccache
    - llvm
    # ginkgo_cuda
    - cuda
    # ginkgo_hip
    - hip
    - hipsparse
    - hipblas
    - hipfft
    - rocrand
    - rocthrust
    # ginkgo_dpcpp
    - intel-oneapi-compilers
    - intel-oneapi-mkl
    - intel-oneapi-vtune
    - intel-oneapi-tbb
    - intel-oneapi-dpl
    - intel-oneapi-dpct
    # build dependencies of the above packages,
    # which would otherwise be missing from the cache
    - pkgconf
    - libsigsegv
    - util-macros
    - diffutils
    - m4
    - libtool
    - bison
    - autoconf
    - automake
    - texinfo
  view:
    default:
      root: /spack/env/
      # we need to exclude CUDA from the view,
      # since it contains Thrust, which conflicts with rocThrust
      exclude: ["cuda"]
  concretizer:
    unify: true
