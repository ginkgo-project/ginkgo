<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ginkgo: The cb-gmres program</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_doc.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ginkgo
   &#160;<span id="projectnumber">Generated from pipelines/259670486 branch based on develop. Ginkgo version 1.3.0</span>
   </div>
   <div id="projectbrief">A numerical linear algebra library targeting many-core architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The cb-gmres program </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The CB-GMRES solver example..</p>
<p> 
<table class="example" width="50%">
<tr><th colspan="2"><b><small>Table of contents</small></b></th></tr>
<tr><td width="50%" valign="top">
<ol>
  <li> <a href="#Intro" class=bold>Introduction</a>
    <ul>
        <li><a href="#Abouttheexample"> About the example </a>
    </ul>
  <li> <a href="#CommProg" class=bold>The commented program</a>
    <ul>
      </ul>
</ol></td><td width="50%" valign="top"><ol>
  <li value="3"> <a href="#Results" class=bold>Results</a>
    <ul>
        <li><a href="#Commentsaboutprogramminganddebugging"> Comments about programming and debugging </a>
    </ul>
  <li> <a href="#PlainProg" class=bold>The plain program</a>
</ol> </td> </tr> </table>
 <a class="anchor" id="Intro"></a> <a class="anchor" id="Introduction"></a></p><h1>Introduction</h1>
<p><a class="anchor" id="Abouttheexample"></a></p><h3>About the example </h3>
<p>This example showcases the usage of the Ginkgo solver CB-GMRES (Compressed Basis GMRES). A small system is solved with two un-preconditioned CB-GMRES solvers:</p><ol type="1">
<li>without compressing the krylov basis; it uses double precision for both the matrix and the krylov basis, and</li>
<li>with a compression of the krylov basis; it uses double precision for the matrix and all arithmetic operations, while using single precision for the storage of the krylov basis</li>
</ol>
<p>Both solves are timed and the residual norm of each solution is computed to show that both solutions are correct. <a class="anchor" id="CommProg"></a> </p><h1>The commented program</h1>
<p>This is the main ginkgo header file.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ginkgo/ginkgo.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
</div><!-- fragment --><p>Helper function which measures the time of <code>solver-&gt;apply(b, x)</code> in seconds To get an accurate result, the solve is repeated multiple times (while ensuring the initial guess is always the same). The result of the solve will be written to x.</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> measure_solve_time_in_s(<span class="keyword">const</span> <a class="code" href="classgko_1_1Executor.html">gko::Executor</a> *exec, <a class="code" href="classgko_1_1LinOp.html">gko::LinOp</a> *solver,</div>
<div class="line">                               <span class="keyword">const</span> <a class="code" href="classgko_1_1LinOp.html">gko::LinOp</a> *b, <a class="code" href="classgko_1_1LinOp.html">gko::LinOp</a> *x)</div>
<div class="line">{</div>
<div class="line">    constexpr <span class="keywordtype">int</span> repeats{5};</div>
<div class="line">    <span class="keywordtype">double</span> duration{0};</div>
</div><!-- fragment --><p>Make a copy of x, so we can re-use the same initial guess multiple times</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> x_copy = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(x);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; repeats; ++i) {</div>
</div><!-- fragment --><p>No need to copy it in the first iteration</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (i != 0) {</div>
<div class="line">    x_copy-&gt;copy_from(x);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Make sure all previous executor operations have finished before starting the time</p>
<div class="fragment"><div class="line">exec-&gt;<a class="code" href="classgko_1_1Executor.html#a24eeee7648c0f0fd07c9866d07154875">synchronize</a>();</div>
<div class="line"><span class="keyword">auto</span> tic = std::chrono::steady_clock::now();</div>
<div class="line">solver-&gt;<a class="code" href="classgko_1_1LinOp.html#a0449b2fc705d2f970855af23b5e2788e">apply</a>(b, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_copy));</div>
</div><!-- fragment --><p>Make sure all computations are done before stopping the time</p>
<div class="fragment"><div class="line">    exec-&gt;<a class="code" href="classgko_1_1Executor.html#a24eeee7648c0f0fd07c9866d07154875">synchronize</a>();</div>
<div class="line">    <span class="keyword">auto</span> tac = std::chrono::steady_clock::now();</div>
<div class="line">    duration += std::chrono::duration&lt;double&gt;(tac - tic).count();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Copy the solution back to x, so the caller has the result</p>
<div class="fragment"><div class="line">    x-&gt;copy_from(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_copy));</div>
<div class="line">    <span class="keywordflow">return</span> duration / static_cast&lt;double&gt;(repeats);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
</div><!-- fragment --><p>Use some shortcuts. In Ginkgo, vectors are seen as a <a class="el" href="classgko_1_1matrix_1_1Dense.html" title="Dense is a matrix format which explicitly stores all values of the matrix.">gko::matrix::Dense</a> with one column/one row. The advantage of this concept is that using multiple vectors is a now a natural extension of adding columns/rows are necessary.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> ValueType = double;</div>
<div class="line"><span class="keyword">using</span> RealValueType = <a class="code" href="namespacegko.html#afd46d554050c4ae90e84ea4fcd9a41f3">gko::remove_complex&lt;ValueType&gt;</a>;</div>
<div class="line"><span class="keyword">using</span> IndexType = int;</div>
<div class="line"><span class="keyword">using</span> vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;ValueType&gt;</a>;</div>
<div class="line"><span class="keyword">using</span> real_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;RealValueType&gt;</a>;</div>
</div><!-- fragment --><p>The <a class="el" href="classgko_1_1matrix_1_1Csr.html" title="CSR is a matrix format which stores only the nonzero coefficients by compressing each row of the matr...">gko::matrix::Csr</a> class is used here, but any other matrix class such as <a class="el" href="classgko_1_1matrix_1_1Coo.html" title="COO stores a matrix in the coordinate matrix format.">gko::matrix::Coo</a>, <a class="el" href="classgko_1_1matrix_1_1Hybrid.html" title="HYBRID is a matrix format which splits the matrix into ELLPACK and COO format.">gko::matrix::Hybrid</a>, <a class="el" href="classgko_1_1matrix_1_1Ell.html" title="ELL is a matrix format where stride with explicit zeros is used such that all rows have the same numb...">gko::matrix::Ell</a> or <a class="el" href="classgko_1_1matrix_1_1Sellp.html" title="SELL-P is a matrix format similar to ELL format.">gko::matrix::Sellp</a> could also be used.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> mtx = <a class="code" href="classgko_1_1matrix_1_1Csr.html">gko::matrix::Csr&lt;ValueType, IndexType&gt;</a>;</div>
</div><!-- fragment --><p>The <a class="el" href="classgko_1_1solver_1_1CbGmres.html" title="CB-GMRES or the compressed basis generalized minimal residual method is an iterative type Krylov subs...">gko::solver::CbGmres</a> is used here, but any other solver class can also be used.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> cb_gmres = <a class="code" href="classgko_1_1solver_1_1CbGmres.html">gko::solver::CbGmres&lt;ValueType&gt;</a>;</div>
</div><!-- fragment --><p>Print the ginkgo version information.</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; <a class="code" href="classgko_1_1version__info.html#a6daeb8a087cfb57fa055526fc133d8eb">gko::version_info::get</a>() &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (argc == 2 &amp;&amp; (std::string(argv[1]) == <span class="stringliteral">&quot;--help&quot;</span>)) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; [executor] &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::exit(-1);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Map which generates the appropriate executor</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> executor_string = argc &gt;= 2 ? argv[1] : <span class="stringliteral">&quot;reference&quot;</span>;</div>
<div class="line">std::map&lt;std::string, std::function&lt;std::shared_ptr&lt;gko::Executor&gt;()&gt;&gt;</div>
<div class="line">    exec_map{</div>
<div class="line">        {<span class="stringliteral">&quot;omp&quot;</span>, [] { <span class="keywordflow">return</span> <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>(); }},</div>
<div class="line">        {<span class="stringliteral">&quot;cuda&quot;</span>,</div>
<div class="line">         [] {</div>
<div class="line">             <span class="keywordflow">return</span> <a class="code" href="classgko_1_1CudaExecutor.html#aa577135e082f9be20617e9d66209ca25">gko::CudaExecutor::create</a>(0, <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>(),</div>
<div class="line">                                              <span class="keyword">true</span>);</div>
<div class="line">         }},</div>
<div class="line">        {<span class="stringliteral">&quot;hip&quot;</span>,</div>
<div class="line">         [] {</div>
<div class="line">             <span class="keywordflow">return</span> <a class="code" href="classgko_1_1HipExecutor.html#abee0dc3dfc064c9edbdc02c2b3b11264">gko::HipExecutor::create</a>(0, <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>(),</div>
<div class="line">                                             <span class="keyword">true</span>);</div>
<div class="line">         }},</div>
<div class="line">        {<span class="stringliteral">&quot;dpcpp&quot;</span>,</div>
<div class="line">         [] {</div>
<div class="line">             <span class="keywordflow">return</span> <a class="code" href="classgko_1_1DpcppExecutor.html#ac46044fcb00b2d224b45d93eaf8c579d">gko::DpcppExecutor::create</a>(0,</div>
<div class="line">                                               <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>());</div>
<div class="line">         }},</div>
<div class="line">        {<span class="stringliteral">&quot;reference&quot;</span>, [] { <span class="keywordflow">return</span> gko::ReferenceExecutor::create(); }}};</div>
</div><!-- fragment --><p>executor where Ginkgo will perform the computation</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> exec = exec_map.at(executor_string)();  <span class="comment">// throws if not valid</span></div>
</div><!-- fragment --><p>Note: this matrix is copied from "SOURCE_DIR/matrices" instead of from the local directory. For details, see "examples/cb-gmres/CMakeLists.txt"</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> A = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(gko::read&lt;mtx&gt;(std::ifstream(<span class="stringliteral">&quot;data/A.mtx&quot;</span>), exec));</div>
</div><!-- fragment --><p>Create a uniform right-hand side with a norm2 of 1 on the host (norm2(b) == 1), followed by copying it to the actual executor (to make sure it also works for GPUs)</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> A_size = A-&gt;get_size();</div>
<div class="line"><span class="keyword">auto</span> b_host = vec::create(exec-&gt;<a class="code" href="classgko_1_1Executor.html#acaec4f999d52fc71e5e5a3d3ad93609c">get_master</a>(), <a class="code" href="structgko_1_1dim.html">gko::dim&lt;2&gt;</a>{A_size[0], 1});</div>
<div class="line"><span class="keywordflow">for</span> (<a class="code" href="namespacegko.html#a6e5c95df0ae4e47aab2f604a22d98ee7">gko::size_type</a> i = 0; i &lt; A_size[0]; ++i) {</div>
<div class="line">    b_host-&gt;at(i, 0) =</div>
<div class="line">        ValueType{1} / std::sqrt(static_cast&lt;ValueType&gt;(A_size[0]));</div>
<div class="line">}</div>
<div class="line"><span class="keyword">auto</span> b_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec);</div>
<div class="line">b_host-&gt;compute_norm2(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b_norm));</div>
<div class="line"><span class="keyword">auto</span> b = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(exec, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b_host));</div>
</div><!-- fragment --><p>As an initial guess, use the right-hand side</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> x_keep = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b));</div>
<div class="line"><span class="keyword">auto</span> x_reduce = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(x_keep);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> RealValueType reduction_factor{1e-6};</div>
</div><!-- fragment --><p>Generate two solver factories: <code>_keep</code> uses the same precision for the krylov basis as the matrix, and <code>_reduce</code> uses one precision below it. If <code>ValueType</code> is double, then <code>_reduce</code> uses float as the krylov basis storage type</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> solver_gen_keep =</div>
<div class="line">    cb_gmres::build()</div>
<div class="line">        .with_criteria(</div>
<div class="line">            gko::stop::Iteration::build().with_max_iters(1000u).on(exec),</div>
<div class="line">            <a class="code" href="classgko_1_1stop_1_1RelativeResidualNorm.html">gko::stop::RelativeResidualNorm&lt;ValueType&gt;::build</a>()</div>
<div class="line">                .with_tolerance(reduction_factor)</div>
<div class="line">                .on(exec))</div>
<div class="line">        .with_krylov_dim(100u)</div>
<div class="line">        .with_storage_precision(</div>
<div class="line">            gko::solver::cb_gmres::storage_precision::keep)</div>
<div class="line">        .on(exec);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> solver_gen_reduce =</div>
<div class="line">    cb_gmres::build()</div>
<div class="line">        .with_criteria(</div>
<div class="line">            gko::stop::Iteration::build().with_max_iters(1000u).on(exec),</div>
<div class="line">            <a class="code" href="classgko_1_1stop_1_1RelativeResidualNorm.html">gko::stop::RelativeResidualNorm&lt;ValueType&gt;::build</a>()</div>
<div class="line">                .with_tolerance(reduction_factor)</div>
<div class="line">                .on(exec))</div>
<div class="line">        .with_krylov_dim(100u)</div>
<div class="line">        .with_storage_precision(</div>
<div class="line">            gko::solver::cb_gmres::storage_precision::reduce1)</div>
<div class="line">        .on(exec);</div>
</div><!-- fragment --><p>Generate the actual solver from the factory and the matrix.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> solver_keep = solver_gen_keep-&gt;generate(A);</div>
<div class="line"><span class="keyword">auto</span> solver_reduce = solver_gen_reduce-&gt;generate(A);</div>
</div><!-- fragment --><p>Solve both system and measure the time for each.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> time_keep = measure_solve_time_in_s(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(exec), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(solver_keep),</div>
<div class="line">                                         <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_keep));</div>
<div class="line"><span class="keyword">auto</span> time_reduce = measure_solve_time_in_s(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(exec), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(solver_reduce),</div>
<div class="line">                                           <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_reduce));</div>
</div><!-- fragment --><p>Make sure the output is in scientific notation for easier comparison</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; std::scientific;</div>
</div><!-- fragment --><p>Note: The time might not be significantly different since the matrix is quite small</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Solve time without compression: &quot;</span> &lt;&lt; time_keep &lt;&lt; <span class="stringliteral">&quot; s\n&quot;</span></div>
<div class="line">          &lt;&lt; <span class="stringliteral">&quot;Solve time with compression:    &quot;</span> &lt;&lt; time_reduce &lt;&lt; <span class="stringliteral">&quot; s\n&quot;</span>;</div>
</div><!-- fragment --><p>To measure if your solution has actually converged, the error of the solution is measured. one, neg_one are objects that represent the numbers which allow for a uniform interface when computing on any device. To compute the residual, the (advanced) apply method is used.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> <a class="code" href="namespacegko.html#a0059e27f8f4bc348ff65c1e60caf47c8">one</a> = gko::initialize&lt;vec&gt;({1.0}, exec);</div>
<div class="line"><span class="keyword">auto</span> neg_one = gko::initialize&lt;vec&gt;({-1.0}, exec);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> res_norm_keep = gko::initialize&lt;real_vec&gt;({0.0}, exec);</div>
<div class="line"><span class="keyword">auto</span> res_norm_reduce = gko::initialize&lt;real_vec&gt;({0.0}, exec);</div>
<div class="line"><span class="keyword">auto</span> tmp = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a>(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">gko::lend</a>(b));</div>
</div><!-- fragment --><p>tmp = Ax - tmp</p>
<div class="fragment"><div class="line">    A-&gt;apply(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_keep), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(neg_one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(tmp));</div>
<div class="line">    tmp-&gt;compute_norm2(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_keep));</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;\nResidual norm without compression:\n&quot;</span>;</div>
<div class="line">    <a class="code" href="namespacegko.html#a859dc47a462721d83728d91ab7fa2148">write</a>(std::cout, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_keep));</div>
<div class="line"> </div>
<div class="line">    tmp-&gt;copy_from(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b));</div>
<div class="line">    A-&gt;apply(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_reduce), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(neg_one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(tmp));</div>
<div class="line">    tmp-&gt;compute_norm2(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_reduce));</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;\nResidual norm with compression:\n&quot;</span>;</div>
<div class="line">    <a class="code" href="namespacegko.html#a859dc47a462721d83728d91ab7fa2148">write</a>(std::cout, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_reduce));</div>
<div class="line">}</div>
</div><!-- fragment --><p> <a class="anchor" id="Results"></a></p><h1>Results</h1>
<p>The following is the expected result:</p>
<div class="fragment"><div class="line">Solve time without compression: 1.842690e-04 s</div>
<div class="line">Solve time with compression:    1.589936e-04 s</div>
<div class="line"> </div>
<div class="line">Residual norm without compression:</div>
<div class="line">%%MatrixMarket matrix <a class="code" href="namespacegko.html#ae749a5ea11a93c1bcc9158d9a6e9fb68af1f713c9e000f5d3f280adbd124df4f5">array</a> <a class="code" href="namespacegko.html#a85e29870bacc4e660be5acbbf742305e">real</a> general</div>
<div class="line">1 1</div>
<div class="line">2.430544e-07</div>
<div class="line"> </div>
<div class="line">Residual norm with compression:</div>
<div class="line">%%MatrixMarket matrix <a class="code" href="namespacegko.html#ae749a5ea11a93c1bcc9158d9a6e9fb68af1f713c9e000f5d3f280adbd124df4f5">array</a> <a class="code" href="namespacegko.html#a85e29870bacc4e660be5acbbf742305e">real</a> general</div>
<div class="line">1 1</div>
<div class="line">3.437257e-07</div>
</div><!-- fragment --><p><a class="anchor" id="Commentsaboutprogramminganddebugging"></a></p><h3>Comments about programming and debugging </h3>
<p><a class="anchor" id="PlainProg"></a> </p><h1>The plain program</h1>
<div class="fragment"><div class="line"><span class="comment">/*******************************&lt;GINKGO LICENSE&gt;******************************</span></div>
<div class="line"><span class="comment">Copyright (c) 2017-2021, the Ginkgo authors</span></div>
<div class="line"><span class="comment">All rights reserved.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><span class="comment">modification, are permitted provided that the following conditions</span></div>
<div class="line"><span class="comment">are met:</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">1. Redistributions of source code must retain the above copyright</span></div>
<div class="line"><span class="comment">notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">2. Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><span class="comment">notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><span class="comment">documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">3. Neither the name of the copyright holder nor the names of its</span></div>
<div class="line"><span class="comment">contributors may be used to endorse or promote products derived from</span></div>
<div class="line"><span class="comment">this software without specific prior written permission.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS</span></div>
<div class="line"><span class="comment">IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED</span></div>
<div class="line"><span class="comment">TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A</span></div>
<div class="line"><span class="comment">PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><span class="comment">HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><span class="comment">SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><span class="comment">LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><span class="comment">DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><span class="comment">THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><span class="comment">(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><span class="comment">OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">******************************&lt;GINKGO LICENSE&gt;*******************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ginkgo/ginkgo.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">double</span> measure_solve_time_in_s(<span class="keyword">const</span> <a class="code" href="classgko_1_1Executor.html">gko::Executor</a> *exec, <a class="code" href="classgko_1_1LinOp.html">gko::LinOp</a> *solver,</div>
<div class="line">                               <span class="keyword">const</span> <a class="code" href="classgko_1_1LinOp.html">gko::LinOp</a> *b, <a class="code" href="classgko_1_1LinOp.html">gko::LinOp</a> *x)</div>
<div class="line">{</div>
<div class="line">    constexpr <span class="keywordtype">int</span> repeats{5};</div>
<div class="line">    <span class="keywordtype">double</span> duration{0};</div>
<div class="line">    <span class="keyword">auto</span> x_copy = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(x);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; repeats; ++i) {</div>
<div class="line">        <span class="keywordflow">if</span> (i != 0) {</div>
<div class="line">            x_copy-&gt;copy_from(x);</div>
<div class="line">        }</div>
<div class="line">        exec-&gt;<a class="code" href="classgko_1_1Executor.html#a24eeee7648c0f0fd07c9866d07154875">synchronize</a>();</div>
<div class="line">        <span class="keyword">auto</span> tic = std::chrono::steady_clock::now();</div>
<div class="line">        solver-&gt;<a class="code" href="classgko_1_1LinOp.html#a0449b2fc705d2f970855af23b5e2788e">apply</a>(b, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_copy));</div>
<div class="line">        exec-&gt;<a class="code" href="classgko_1_1Executor.html#a24eeee7648c0f0fd07c9866d07154875">synchronize</a>();</div>
<div class="line">        <span class="keyword">auto</span> tac = std::chrono::steady_clock::now();</div>
<div class="line">        duration += std::chrono::duration&lt;double&gt;(tac - tic).count();</div>
<div class="line">    }</div>
<div class="line">    x-&gt;copy_from(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_copy));</div>
<div class="line">    <span class="keywordflow">return</span> duration / static_cast&lt;double&gt;(repeats);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using</span> ValueType = double;</div>
<div class="line">    <span class="keyword">using</span> RealValueType = <a class="code" href="namespacegko.html#afd46d554050c4ae90e84ea4fcd9a41f3">gko::remove_complex&lt;ValueType&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> IndexType = int;</div>
<div class="line">    <span class="keyword">using</span> vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;ValueType&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> real_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;RealValueType&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> mtx = <a class="code" href="classgko_1_1matrix_1_1Csr.html">gko::matrix::Csr&lt;ValueType, IndexType&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> cb_gmres = <a class="code" href="classgko_1_1solver_1_1CbGmres.html">gko::solver::CbGmres&lt;ValueType&gt;</a>;</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <a class="code" href="classgko_1_1version__info.html#a6daeb8a087cfb57fa055526fc133d8eb">gko::version_info::get</a>() &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc == 2 &amp;&amp; (std::string(argv[1]) == <span class="stringliteral">&quot;--help&quot;</span>)) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; [executor] &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::exit(-1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> executor_string = argc &gt;= 2 ? argv[1] : <span class="stringliteral">&quot;reference&quot;</span>;</div>
<div class="line">    std::map&lt;std::string, std::function&lt;std::shared_ptr&lt;gko::Executor&gt;()&gt;&gt;</div>
<div class="line">        exec_map{</div>
<div class="line">            {<span class="stringliteral">&quot;omp&quot;</span>, [] { <span class="keywordflow">return</span> <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>(); }},</div>
<div class="line">            {<span class="stringliteral">&quot;cuda&quot;</span>,</div>
<div class="line">             [] {</div>
<div class="line">                 <span class="keywordflow">return</span> <a class="code" href="classgko_1_1CudaExecutor.html#aa577135e082f9be20617e9d66209ca25">gko::CudaExecutor::create</a>(0, <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>(),</div>
<div class="line">                                                  <span class="keyword">true</span>);</div>
<div class="line">             }},</div>
<div class="line">            {<span class="stringliteral">&quot;hip&quot;</span>,</div>
<div class="line">             [] {</div>
<div class="line">                 <span class="keywordflow">return</span> <a class="code" href="classgko_1_1HipExecutor.html#abee0dc3dfc064c9edbdc02c2b3b11264">gko::HipExecutor::create</a>(0, <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>(),</div>
<div class="line">                                                 <span class="keyword">true</span>);</div>
<div class="line">             }},</div>
<div class="line">            {<span class="stringliteral">&quot;dpcpp&quot;</span>,</div>
<div class="line">             [] {</div>
<div class="line">                 <span class="keywordflow">return</span> <a class="code" href="classgko_1_1DpcppExecutor.html#ac46044fcb00b2d224b45d93eaf8c579d">gko::DpcppExecutor::create</a>(0,</div>
<div class="line">                                                   <a class="code" href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a>());</div>
<div class="line">             }},</div>
<div class="line">            {<span class="stringliteral">&quot;reference&quot;</span>, [] { <span class="keywordflow">return</span> gko::ReferenceExecutor::create(); }}};</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> exec = exec_map.at(executor_string)();  <span class="comment">// throws if not valid</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> A = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(gko::read&lt;mtx&gt;(std::ifstream(<span class="stringliteral">&quot;data/A.mtx&quot;</span>), exec));</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> A_size = A-&gt;get_size();</div>
<div class="line">    <span class="keyword">auto</span> b_host = vec::create(exec-&gt;<a class="code" href="classgko_1_1Executor.html#acaec4f999d52fc71e5e5a3d3ad93609c">get_master</a>(), <a class="code" href="structgko_1_1dim.html">gko::dim&lt;2&gt;</a>{A_size[0], 1});</div>
<div class="line">    <span class="keywordflow">for</span> (<a class="code" href="namespacegko.html#a6e5c95df0ae4e47aab2f604a22d98ee7">gko::size_type</a> i = 0; i &lt; A_size[0]; ++i) {</div>
<div class="line">        b_host-&gt;at(i, 0) =</div>
<div class="line">            ValueType{1} / std::sqrt(static_cast&lt;ValueType&gt;(A_size[0]));</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">auto</span> b_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec);</div>
<div class="line">    b_host-&gt;compute_norm2(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b_norm));</div>
<div class="line">    <span class="keyword">auto</span> b = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(exec, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b_host));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> x_keep = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b));</div>
<div class="line">    <span class="keyword">auto</span> x_reduce = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">clone</a>(x_keep);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> RealValueType reduction_factor{1e-6};</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> solver_gen_keep =</div>
<div class="line">        cb_gmres::build()</div>
<div class="line">            .with_criteria(</div>
<div class="line">                gko::stop::Iteration::build().with_max_iters(1000u).on(exec),</div>
<div class="line">                <a class="code" href="classgko_1_1stop_1_1RelativeResidualNorm.html">gko::stop::RelativeResidualNorm&lt;ValueType&gt;::build</a>()</div>
<div class="line">                    .with_tolerance(reduction_factor)</div>
<div class="line">                    .on(exec))</div>
<div class="line">            .with_krylov_dim(100u)</div>
<div class="line">            .with_storage_precision(</div>
<div class="line">                gko::solver::cb_gmres::storage_precision::keep)</div>
<div class="line">            .on(exec);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> solver_gen_reduce =</div>
<div class="line">        cb_gmres::build()</div>
<div class="line">            .with_criteria(</div>
<div class="line">                gko::stop::Iteration::build().with_max_iters(1000u).on(exec),</div>
<div class="line">                <a class="code" href="classgko_1_1stop_1_1RelativeResidualNorm.html">gko::stop::RelativeResidualNorm&lt;ValueType&gt;::build</a>()</div>
<div class="line">                    .with_tolerance(reduction_factor)</div>
<div class="line">                    .on(exec))</div>
<div class="line">            .with_krylov_dim(100u)</div>
<div class="line">            .with_storage_precision(</div>
<div class="line">                gko::solver::cb_gmres::storage_precision::reduce1)</div>
<div class="line">            .on(exec);</div>
<div class="line">    <span class="keyword">auto</span> solver_keep = solver_gen_keep-&gt;generate(A);</div>
<div class="line">    <span class="keyword">auto</span> solver_reduce = solver_gen_reduce-&gt;generate(A);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> time_keep = measure_solve_time_in_s(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(exec), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(solver_keep),</div>
<div class="line">                                             <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_keep));</div>
<div class="line">    <span class="keyword">auto</span> time_reduce = measure_solve_time_in_s(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(exec), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(solver_reduce),</div>
<div class="line">                                               <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_reduce));</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; std::scientific;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Solve time without compression: &quot;</span> &lt;&lt; time_keep &lt;&lt; <span class="stringliteral">&quot; s\n&quot;</span></div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot;Solve time with compression:    &quot;</span> &lt;&lt; time_reduce &lt;&lt; <span class="stringliteral">&quot; s\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> <a class="code" href="namespacegko.html#a0059e27f8f4bc348ff65c1e60caf47c8">one</a> = gko::initialize&lt;vec&gt;({1.0}, exec);</div>
<div class="line">    <span class="keyword">auto</span> neg_one = gko::initialize&lt;vec&gt;({-1.0}, exec);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> res_norm_keep = gko::initialize&lt;real_vec&gt;({0.0}, exec);</div>
<div class="line">    <span class="keyword">auto</span> res_norm_reduce = gko::initialize&lt;real_vec&gt;({0.0}, exec);</div>
<div class="line">    <span class="keyword">auto</span> tmp = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a>(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">gko::lend</a>(b));</div>
<div class="line"> </div>
<div class="line">    A-&gt;apply(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_keep), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(neg_one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(tmp));</div>
<div class="line">    tmp-&gt;compute_norm2(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_keep));</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;\nResidual norm without compression:\n&quot;</span>;</div>
<div class="line">    <a class="code" href="namespacegko.html#a859dc47a462721d83728d91ab7fa2148">write</a>(std::cout, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_keep));</div>
<div class="line"> </div>
<div class="line">    tmp-&gt;copy_from(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(b));</div>
<div class="line">    A-&gt;apply(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(x_reduce), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(neg_one), <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(tmp));</div>
<div class="line">    tmp-&gt;compute_norm2(<a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_reduce));</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;\nResidual norm with compression:\n&quot;</span>;</div>
<div class="line">    <a class="code" href="namespacegko.html#a859dc47a462721d83728d91ab7fa2148">write</a>(std::cout, <a class="code" href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">lend</a>(res_norm_reduce));</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aclassgko_1_1Executor_html_a24eeee7648c0f0fd07c9866d07154875"><div class="ttname"><a href="classgko_1_1Executor.html#a24eeee7648c0f0fd07c9866d07154875">gko::Executor::synchronize</a></div><div class="ttdeci">virtual void synchronize() const =0</div><div class="ttdoc">Synchronize the operations launched on the executor with its master.</div></div>
<div class="ttc" id="aclassgko_1_1matrix_1_1Csr_html"><div class="ttname"><a href="classgko_1_1matrix_1_1Csr.html">gko::matrix::Csr</a></div><div class="ttdoc">CSR is a matrix format which stores only the nonzero coefficients by compressing each row of the matr...</div><div class="ttdef"><b>Definition:</b> coo.hpp:51</div></div>
<div class="ttc" id="anamespacegko_html_a85e29870bacc4e660be5acbbf742305e"><div class="ttname"><a href="namespacegko.html#a85e29870bacc4e660be5acbbf742305e">gko::real</a></div><div class="ttdeci">constexpr std::enable_if_t&lt;!is_complex_s&lt; T &gt;::value, T &gt; real(const T &amp;x)</div><div class="ttdoc">Returns the real part of the object.</div><div class="ttdef"><b>Definition:</b> math.hpp:817</div></div>
<div class="ttc" id="aclassgko_1_1HipExecutor_html_abee0dc3dfc064c9edbdc02c2b3b11264"><div class="ttname"><a href="classgko_1_1HipExecutor.html#abee0dc3dfc064c9edbdc02c2b3b11264">gko::HipExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; HipExecutor &gt; create(int device_id, std::shared_ptr&lt; Executor &gt; master, bool device_reset=false)</div><div class="ttdoc">Creates a new HipExecutor.</div></div>
<div class="ttc" id="anamespacegko_html_ae749a5ea11a93c1bcc9158d9a6e9fb68af1f713c9e000f5d3f280adbd124df4f5"><div class="ttname"><a href="namespacegko.html#ae749a5ea11a93c1bcc9158d9a6e9fb68af1f713c9e000f5d3f280adbd124df4f5">gko::layout_type::array</a></div><div class="ttdoc">The matrix should be written as dense matrix in column-major order.</div></div>
<div class="ttc" id="aclassgko_1_1LinOp_html"><div class="ttname"><a href="classgko_1_1LinOp.html">gko::LinOp</a></div><div class="ttdef"><b>Definition:</b> lin_op.hpp:145</div></div>
<div class="ttc" id="aclassgko_1_1matrix_1_1Dense_html"><div class="ttname"><a href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense</a></div><div class="ttdoc">Dense is a matrix format which explicitly stores all values of the matrix.</div><div class="ttdef"><b>Definition:</b> coo.hpp:55</div></div>
<div class="ttc" id="aclassgko_1_1CudaExecutor_html_aa577135e082f9be20617e9d66209ca25"><div class="ttname"><a href="classgko_1_1CudaExecutor.html#aa577135e082f9be20617e9d66209ca25">gko::CudaExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; CudaExecutor &gt; create(int device_id, std::shared_ptr&lt; Executor &gt; master, bool device_reset=false)</div><div class="ttdoc">Creates a new CudaExecutor.</div></div>
<div class="ttc" id="aclassgko_1_1OmpExecutor_html_a33ca05fdd0fc928ee262fc9425304874"><div class="ttname"><a href="classgko_1_1OmpExecutor.html#a33ca05fdd0fc928ee262fc9425304874">gko::OmpExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; OmpExecutor &gt; create()</div><div class="ttdoc">Creates a new OmpExecutor.</div><div class="ttdef"><b>Definition:</b> executor.hpp:1107</div></div>
<div class="ttc" id="anamespacegko_html_a6e5c95df0ae4e47aab2f604a22d98ee7"><div class="ttname"><a href="namespacegko.html#a6e5c95df0ae4e47aab2f604a22d98ee7">gko::size_type</a></div><div class="ttdeci">std::size_t size_type</div><div class="ttdoc">Integral type used for allocation quantities.</div><div class="ttdef"><b>Definition:</b> types.hpp:102</div></div>
<div class="ttc" id="aclassgko_1_1Executor_html_acaec4f999d52fc71e5e5a3d3ad93609c"><div class="ttname"><a href="classgko_1_1Executor.html#acaec4f999d52fc71e5e5a3d3ad93609c">gko::Executor::get_master</a></div><div class="ttdeci">virtual std::shared_ptr&lt; Executor &gt; get_master() noexcept=0</div><div class="ttdoc">Returns the master OmpExecutor of this Executor.</div></div>
<div class="ttc" id="anamespacegko_html_a1beb80750459e4201aa9d882d2d074c3"><div class="ttname"><a href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a></div><div class="ttdeci">detail::cloned_type&lt; Pointer &gt; clone(const Pointer &amp;p)</div><div class="ttdoc">Creates a unique clone of the object pointed to by p.</div><div class="ttdef"><b>Definition:</b> utils_helper.hpp:160</div></div>
<div class="ttc" id="anamespacegko_html_a859dc47a462721d83728d91ab7fa2148"><div class="ttname"><a href="namespacegko.html#a859dc47a462721d83728d91ab7fa2148">gko::write</a></div><div class="ttdeci">void write(StreamType &amp;&amp;os, MatrixType *matrix, layout_type layout=layout_type::array)</div><div class="ttdoc">Reads a matrix stored in matrix market format from an input stream.</div><div class="ttdef"><b>Definition:</b> mtx_io.hpp:134</div></div>
<div class="ttc" id="aclassgko_1_1version__info_html_a6daeb8a087cfb57fa055526fc133d8eb"><div class="ttname"><a href="classgko_1_1version__info.html#a6daeb8a087cfb57fa055526fc133d8eb">gko::version_info::get</a></div><div class="ttdeci">static const version_info &amp; get()</div><div class="ttdoc">Returns an instance of version_info.</div><div class="ttdef"><b>Definition:</b> version.hpp:168</div></div>
<div class="ttc" id="anamespacegko_html_a4edc2273b5627ec552ea423b60493be3"><div class="ttname"><a href="namespacegko.html#a4edc2273b5627ec552ea423b60493be3">gko::lend</a></div><div class="ttdeci">std::enable_if&lt; detail::have_ownership_s&lt; Pointer &gt;::value, detail::pointee&lt; Pointer &gt; * &gt;::type lend(const Pointer &amp;p)</div><div class="ttdoc">Returns a non-owning (plain) pointer to the object pointed to by p.</div><div class="ttdef"><b>Definition:</b> utils_helper.hpp:253</div></div>
<div class="ttc" id="astructgko_1_1dim_html"><div class="ttname"><a href="structgko_1_1dim.html">gko::dim&lt; 2 &gt;</a></div></div>
<div class="ttc" id="aclassgko_1_1DpcppExecutor_html_ac46044fcb00b2d224b45d93eaf8c579d"><div class="ttname"><a href="classgko_1_1DpcppExecutor.html#ac46044fcb00b2d224b45d93eaf8c579d">gko::DpcppExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; DpcppExecutor &gt; create(int device_id, std::shared_ptr&lt; Executor &gt; master, std::string device_type=&quot;all&quot;)</div><div class="ttdoc">Creates a new DpcppExecutor.</div></div>
<div class="ttc" id="anamespacegko_html_a3ce296f73db0ff398bdea6009a3a5c58"><div class="ttname"><a href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">gko::share</a></div><div class="ttdeci">detail::shared_type&lt; OwningPointer &gt; share(OwningPointer &amp;&amp;p)</div><div class="ttdoc">Marks the object pointed to by p as shared.</div><div class="ttdef"><b>Definition:</b> utils_helper.hpp:210</div></div>
<div class="ttc" id="aclassgko_1_1solver_1_1CbGmres_html"><div class="ttname"><a href="classgko_1_1solver_1_1CbGmres.html">gko::solver::CbGmres</a></div><div class="ttdoc">CB-GMRES or the compressed basis generalized minimal residual method is an iterative type Krylov subs...</div><div class="ttdef"><b>Definition:</b> cb_gmres.hpp:121</div></div>
<div class="ttc" id="aclassgko_1_1stop_1_1RelativeResidualNorm_html"><div class="ttname"><a href="classgko_1_1stop_1_1RelativeResidualNorm.html">gko::stop::RelativeResidualNorm</a></div><div class="ttdoc">The RelativeResidualNorm class is a stopping criterion which stops the iteration process when the res...</div><div class="ttdef"><b>Definition:</b> residual_norm.hpp:358</div></div>
<div class="ttc" id="aclassgko_1_1Executor_html"><div class="ttname"><a href="classgko_1_1Executor.html">gko::Executor</a></div><div class="ttdoc">The first step in using the Ginkgo library consists of creating an executor.</div><div class="ttdef"><b>Definition:</b> executor.hpp:469</div></div>
<div class="ttc" id="anamespacegko_html_afd46d554050c4ae90e84ea4fcd9a41f3"><div class="ttname"><a href="namespacegko.html#afd46d554050c4ae90e84ea4fcd9a41f3">gko::remove_complex</a></div><div class="ttdeci">typename detail::remove_complex_s&lt; T &gt;::type remove_complex</div><div class="ttdoc">Obtain the type which removed the complex of complex/scalar type or the template parameter of class b...</div><div class="ttdef"><b>Definition:</b> math.hpp:344</div></div>
<div class="ttc" id="anamespacegko_html_a0059e27f8f4bc348ff65c1e60caf47c8"><div class="ttname"><a href="namespacegko.html#a0059e27f8f4bc348ff65c1e60caf47c8">gko::one</a></div><div class="ttdeci">constexpr T one()</div><div class="ttdoc">Returns the multiplicative identity for T.</div><div class="ttdef"><b>Definition:</b> math.hpp:742</div></div>
<div class="ttc" id="aclassgko_1_1LinOp_html_a0449b2fc705d2f970855af23b5e2788e"><div class="ttname"><a href="classgko_1_1LinOp.html#a0449b2fc705d2f970855af23b5e2788e">gko::LinOp::apply</a></div><div class="ttdeci">LinOp * apply(const LinOp *b, LinOp *x)</div><div class="ttdoc">Applies a linear operator to a vector (or a sequence of vectors).</div><div class="ttdef"><b>Definition:</b> lin_op.hpp:157</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
